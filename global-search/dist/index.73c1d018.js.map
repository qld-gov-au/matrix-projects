{"mappings":"AA4GwB,IA5GxB,MACIA,cACIC,KAAKC,eAAiB,sBACtBD,KAAKE,iBAAmB,wBACxBF,KAAKG,eAAiB,sBACtBH,KAAKI,gBAAkB,uBAEvBJ,KAAKK,oBACLL,KAAKM,wBACLN,KAAKO,0BACLP,KAAKQ,sBAGTH,qBACiC,QAA1BL,KAAKE,kBAA8BF,KAAKC,kBACvCQ,eAAeC,QAAQ,YAAaV,KAAKE,kBACzCO,eAAeC,QAAQ,UAAWV,KAAKC,iBAE3CQ,eAAeC,QAAQ,UAAWV,KAAKG,gBAG3CQ,sBAAsBC,GAClB,OAAOA,EAAOC,OAAO,GAAGC,cAAgBF,EAAOG,MAAM,GAGzDT,wBACI,IAAIU,EACAC,EAAmBR,eAAeS,QAAQ,WAC1CC,EAAqBV,eAAeS,QAAQ,aAC5CE,EAAmBX,eAAeS,QAAQ,WAE3CD,EACCD,EAAQhB,KAAKW,sBAAsBM,GAC7BG,EACNJ,EAAQ,wBAA0BI,EAAmB,YAC9CD,IACPH,EAAQhB,KAAKW,sBAAsBQ,IAGvC,IAAIb,EAAwB,uiBAaCc,6CACED,0CACFF,oDACOD,8cAcjChB,KAAKI,iBAA6C,QAA1BJ,KAAKE,kBAA8BF,KAAKC,iBAC/DoB,EAAE,aAAaC,OAAOhB,GAI9BC,0BACI,IAAKgB,EAA8Bd,eAAeS,QAAQ,uBAC1DG,EAAE,oCAAoCG,GAAG,UAAU,WAC/C,IAAIC,EAAcJ,EAAErB,MAAM0B,MAC1B,OAAQD,GACJ,IAAK,MAGL,IAAK,SACDhB,eAAeC,QAAQ,sBAAuBe,OAKvB,QAAhCF,GACCF,EAAE,qCAAqCM,KAAK,WAAU,GAK9DnB,sBACIa,EAAE,gBAAgBG,GAAG,SAAU,WAC3B,IAAII,EAAS,IAAIC,gBAAgBC,SAASC,QACtCC,EAAYX,EAAE,gDACdY,EAAkBD,EAAUE,KAAK,WACjCC,EAAgBH,EAAUE,KAAK,SACnCN,EAAOQ,IAAI,QAASD,GACpBP,EAAOQ,IAAI,UAAWH,GACtBL,EAAOQ,IAAI,UAAU,GACrBC,OAAOP,SAASC,OAASH,EAAOU","sources":["src/app.js"],"sourcesContent":["class FilterComponent {\n    constructor() {\n        this.scopeParameter = '%globals_get_scope%';\n        this.profileParameter = '%globals_get_profile%';\n        this.labelParameter = '%globals_get_label%';\n        this.filterParameter = '%globals_get_filter%';\n\n        this.setSessionStorage();\n        this.filterResultsTemplate();\n        this.trackRadioButtonChanges();\n        this.applyFilterBtnClick();\n    }\n\n    setSessionStorage() {\n        if(this.profileParameter !== 'qld' || this.scopeParameter){\n            sessionStorage.setItem('fcProfile', this.profileParameter);\n            sessionStorage.setItem('fcScope', this.scopeParameter);\n        }\n        sessionStorage.setItem('fcLabel', this.labelParameter);\n    }\n\n    capitalizeFirstLetter(string) {\n        return string.charAt(0).toUpperCase() + string.slice(1);\n    }\n\n    filterResultsTemplate(){\n        var label;\n        var labelFromSession = sessionStorage.getItem('fcLabel');\n        var profileFromSession = sessionStorage.getItem('fcProfile');\n        var scopeFromSession = sessionStorage.getItem('fcScope');\n\n        if(labelFromSession){\n            label = this.capitalizeFirstLetter(labelFromSession);\n        } else if(scopeFromSession) {\n            label = \"Results from <strong>\" + scopeFromSession + \"</strong>\";\n        } else if (profileFromSession) {\n            label = this.capitalizeFirstLetter(profileFromSession);\n        }\n\n        var filterResultsTemplate = `\n   <div class=\"qg-filter-by-results\">\n      <p class=\"qg-filter-by-results__title\">Filter results by</p>\n      <form class=\"form qg-forms-v2 qg-filter-by-results__form\">\n      <ol class=\"questions pt-2\">\n        <li>\n          <fieldset>\n            <legend>\n              <span class=\"label\">Content type</span>\n            </legend>\n            <ol class=\"choices qg-forms-v2__radio\">\n              <li>\n                <input checked name=\"filterBy\" id=\"customOption\" type=\"radio\" value=\"custom\"\n                       data-scope=\"${scopeFromSession}\" \n                       data-profile=\"${profileFromSession}\"\n                       data-label=\"${labelFromSession}\" />\n                <label for=\"customOption\">${label}</label>\n              </li>\n              <li>\n                <input name=\"filterBy\" id=\"qld\" type=\"radio\" value=\"qld\" data-profile='qld' data-scope=''/>\n                <label for=\"qld\">all Queensland Government</label>\n              </li>\n            </ol>\n          </fieldset>\n        </li>\n      </ol>\n    </form>\n    <button type=\"button\" class=\"qg-btn qg-btn__filter btn-primary mb-2\" id=\"applyFilter\">Apply filters</button>\n   </div>\n`;\n        if(this.filterParameter || this.profileParameter !== 'qld' || this.scopeParameter){\n            $('.qg-aside').append(filterResultsTemplate);\n        }\n    }\n\n    trackRadioButtonChanges() {\n        var  selectedRadioBtnFromSession = sessionStorage.getItem('selectedRadiobutton');\n        $('input[type=radio][name=filterBy]').on('change', function() {\n            var selectedVal = $(this).val();\n            switch (selectedVal) {\n                case 'qld':\n                    sessionStorage.setItem(`selectedRadiobutton`, selectedVal);\n                    break;\n                case 'custom':\n                    sessionStorage.setItem(`selectedRadiobutton`, selectedVal);\n                    break;\n            }\n        });\n        // Check if the profile value is present then set the hidden profile input field\n        if(selectedRadioBtnFromSession === 'qld'){\n            $(\"input[name=filterBy][value='qld']\").prop(\"checked\",true);\n        }\n\n    }\n\n    applyFilterBtnClick(){\n        $('#applyFilter').on(\"click\" , function() {\n            var params = new URLSearchParams(location.search);\n            var $selected = $(\"input[type='radio'][name='filterBy']:checked\");\n            var selectedProfile = $selected.data('profile');\n            var selectedScope = $selected.data('scope');\n            params.set('scope', selectedScope);\n            params.set('profile', selectedProfile);\n            params.set('filter', true);\n            window.location.search = params.toString();\n        })\n    }\n}\n\nconst filterComponent = new FilterComponent();\n"],"names":["constructor","this","scopeParameter","profileParameter","labelParameter","filterParameter","setSessionStorage","filterResultsTemplate","trackRadioButtonChanges","applyFilterBtnClick","sessionStorage","setItem","capitalizeFirstLetter","string","charAt","toUpperCase","slice","label","labelFromSession","getItem","profileFromSession","scopeFromSession","$","append","selectedRadioBtnFromSession","on","selectedVal","val","prop","params","URLSearchParams","location","search","$selected","selectedProfile","data","selectedScope","set","window","toString"],"version":3,"file":"index.73c1d018.js.map"}